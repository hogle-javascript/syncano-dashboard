machine:
  node:
    version:
      0.10.32

general:
  artifacts:
    - "coverage/"
    - "reports/"

test:
  override:
    - npm run-script nightwatch
    - jscs --esprima=esprima-fb src
    - npm test
    - codeclimate < coverage/lcov.info

deployment:
  staging:
    branch: devel
    commands:
      - npm install
      - NODE_ENV=staging npm run-script publish
      - npm run-script clean

dependencies:
   post:
      - wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
      - sudo dpkg -i google-chrome*.deb
      - npm run-script nightwatch-setup
      - npm start:
            background: true